"use strict";(self.webpackChunksoftpack_docs=self.webpackChunksoftpack_docs||[]).push([[395],{3905:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),s=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},l=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),d=s(a),m=r,k=d["".concat(c,".").concat(m)]||d[m]||u[m]||o;return a?n.createElement(k,i(i({ref:t},l),{},{components:a})):n.createElement(k,i({ref:t},l))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p[d]="string"==typeof e?e:r,i[1]=p;for(var s=2;s<o;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},671:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>p,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const o={sidebar_position:2},i="Adding Packages",p={unversionedId:"tutorials/adding_packages",id:"tutorials/adding_packages",title:"Adding Packages",description:"This documentation is under development and may be incomplete.",source:"@site/docs/tutorials/adding_packages.md",sourceDirName:"tutorials",slug:"/tutorials/adding_packages",permalink:"/softpack-docs/docs/tutorials/adding_packages",draft:!1,tags:[],version:"current",lastUpdatedAt:1693295905,formattedLastUpdatedAt:"Aug 29, 2023",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docs",previous:{title:"Getting Started",permalink:"/softpack-docs/docs/tutorials/getting_started"},next:{title:"How-to Guides",permalink:"/softpack-docs/docs/category/how-to-guides"}},c={},s=[{value:"Generating Packages with SoftPack",id:"generating-packages-with-softpack",level:2}],l={toc:s},d="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"adding-packages"},"Adding Packages"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"This documentation is under development and may be incomplete.")),(0,r.kt)("p",null,"Spack comes with a builtin repository of over 7000 packages. A compltete list\nis available from Spack at ",(0,r.kt)("a",{parentName:"p",href:"https://packages.spack.io"},"packages.spack.io"),"."),(0,r.kt)("p",null,"Spack also allows you to add support for any additional software that's not available\nin Spack's builtin repository. For detailed instructions on how to create a new package,\nplease refer to the Spack ",(0,r.kt)("a",{parentName:"p",href:"https://spack.readthedocs.io/en/latest/packaging_guide.html"},"Packaging Guide"),"."),(0,r.kt)("p",null,"Once you've created the package, you can add it to a custom repository using ",(0,r.kt)("inlineCode",{parentName:"p"},"spack repo add")," command."),(0,r.kt)("p",null,"An example repository that adds a number of Python and R packages is avaiable at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/wtsi-hgi/spack-repo"},"github.com/wtsi-hgi/spack-repo"),"."),(0,r.kt)("h2",{id:"generating-packages-with-softpack"},"Generating Packages with SoftPack"),(0,r.kt)("p",null,"SoftPack offers tools for automatically generating support for R packages hosted on CRAN, Bioconductor, or in a Git repository."),(0,r.kt)("p",null,"To add an R package to your custom Spack repository, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"softpack-builder package create")," command."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"Usage: softpack-builder package create [OPTIONS] PACKAGES...\n\nCreate a package.\n\nArguments:\n*    packages     PACKAGES...  [default: None] [required]                                    \n\nOptions:\n--template        [python|r]  Package template. [default: None]\n--cran                        Get package from CRAN.\n--pypi                        Get package from PyPI. \n--git             URL         Get package from Git. [default: None]\n--branch          TEXT        Git branch. [default: None]\n--commit          TEXT        Git commit hash. [default: None]\n--tag             TEXT        Git tag. [default: None]\n--force                       Overwrite if package already exists.\n--help                        Show this message and exit.\n")),(0,r.kt)("p",null,"Before you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"softpack-builder package create")," command, make sure you've defined these defaults for package creation in ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.softpack/builder/config.yml"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"packages:\n  templates:\n    path: PATH\n  repo:\n    namespace: NAMESPACE\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"templates.path"),(0,r.kt)("td",{parentName:"tr",align:null},"A default collection of templates is provided at ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/wtsi-hgi/softpack-templates"},"github.com/wtsi-hgi/softpack-templates"),". You can clone this repository (or a fork of it), and provide the local path of the cloned repo here.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"repo.namespace"),(0,r.kt)("td",{parentName:"tr",align:null},"This is the namespace of your custom repository, for example, the namepsace from ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/wtsi-hgi/spack-repo/blob/main/repo.yaml"},"github.com/wtsi-hgi/spack-repo"),".")))),(0,r.kt)("p",null,"Here's an example of how to add the R package ",(0,r.kt)("a",{parentName:"p",href:"https://cran.r-project.org/web/packages/AUC/index.html"},"AUC")," with\n",(0,r.kt)("inlineCode",{parentName:"p"},"softpack-builder package create")," once you've provided configuration for package creation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"softpack-builder package create --cran AUC --template r \n")),(0,r.kt)("p",null,"A python module named ",(0,r.kt)("inlineCode",{parentName:"p"},"packages/r-auc/package.py")," will be created in your custom repository. It is recommended that you manually inspect the module and verify that it installs the package correctly before commiting it to your custom repository."))}u.isMDXComponent=!0}}]);